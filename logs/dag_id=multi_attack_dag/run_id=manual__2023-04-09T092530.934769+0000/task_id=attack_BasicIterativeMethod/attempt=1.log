[2023-04-09 09:25:51,004] {taskinstance.py:1159} INFO - Dependencies all met for <TaskInstance: multi_attack_dag.attack_BasicIterativeMethod manual__2023-04-09T09:25:30.934769+00:00 [queued]>
[2023-04-09 09:25:51,035] {taskinstance.py:1159} INFO - Dependencies all met for <TaskInstance: multi_attack_dag.attack_BasicIterativeMethod manual__2023-04-09T09:25:30.934769+00:00 [queued]>
[2023-04-09 09:25:51,036] {taskinstance.py:1356} INFO - 
--------------------------------------------------------------------------------
[2023-04-09 09:25:51,037] {taskinstance.py:1357} INFO - Starting attempt 1 of 2
[2023-04-09 09:25:51,038] {taskinstance.py:1358} INFO - 
--------------------------------------------------------------------------------
[2023-04-09 09:25:51,069] {taskinstance.py:1377} INFO - Executing <Task(PythonOperator): attack_BasicIterativeMethod> on 2023-04-09 09:25:30.934769+00:00
[2023-04-09 09:25:51,083] {standard_task_runner.py:52} INFO - Started process 7027 to run task
[2023-04-09 09:25:51,088] {standard_task_runner.py:79} INFO - Running: ['***', 'tasks', 'run', 'multi_attack_dag', 'attack_BasicIterativeMethod', 'manual__2023-04-09T09:25:30.934769+00:00', '--job-id', '4902', '--raw', '--subdir', 'DAGS_FOLDER/attack_dag.py', '--cfg-path', '/tmp/tmp7_4skjbm', '--error-file', '/tmp/tmpsw3mcj4k']
[2023-04-09 09:25:51,090] {standard_task_runner.py:80} INFO - Job 4902: Subtask attack_BasicIterativeMethod
[2023-04-09 09:25:51,202] {task_command.py:369} INFO - Running <TaskInstance: multi_attack_dag.attack_BasicIterativeMethod manual__2023-04-09T09:25:30.934769+00:00 [running]> on host ff3d40af78f9
[2023-04-09 09:25:51,348] {taskinstance.py:1571} INFO - Exporting the following env vars:
AIRFLOW_CTX_DAG_OWNER=***
AIRFLOW_CTX_DAG_ID=multi_attack_dag
AIRFLOW_CTX_TASK_ID=attack_BasicIterativeMethod
AIRFLOW_CTX_EXECUTION_DATE=2023-04-09T09:25:30.934769+00:00
AIRFLOW_CTX_TRY_NUMBER=1
AIRFLOW_CTX_DAG_RUN_ID=manual__2023-04-09T09:25:30.934769+00:00
[2023-04-09 09:25:51,356] {transport.py:157} INFO - Attempting refresh to obtain initial access_token
[2023-04-09 09:25:51,362] {client.py:777} INFO - Refreshing access_token
[2023-04-09 09:25:52,343] {transport.py:157} INFO - Attempting refresh to obtain initial access_token
[2023-04-09 09:25:52,348] {client.py:777} INFO - Refreshing access_token
[2023-04-09 09:25:53,485] {transport.py:157} INFO - Attempting refresh to obtain initial access_token
[2023-04-09 09:25:53,491] {client.py:777} INFO - Refreshing access_token
[2023-04-09 09:25:54,188] {pytorch.py:1198} INFO - Inferred 5 hidden layers on PyTorch classifier.
[2023-04-09 09:25:54,193] {transport.py:157} INFO - Attempting refresh to obtain initial access_token
[2023-04-09 09:25:54,195] {client.py:777} INFO - Refreshing access_token
[2023-04-09 09:27:08,027] {projected_gradient_descent.py:199} INFO - Creating adversarial samples.
[2023-04-09 09:27:08,460] {logging_mixin.py:115} WARNING - PGD - Batches:   0%|          | 0/32 [00:00<?, ?it/s]
[2023-04-09 09:27:09,897] {logging_mixin.py:115} WARNING - PGD - Batches:   3%|3         | 1/32 [00:01<00:44,  1.44s/it]
[2023-04-09 09:27:10,251] {logging_mixin.py:115} WARNING - PGD - Batches:   6%|6         | 2/32 [00:01<00:23,  1.25it/s]
[2023-04-09 09:27:13,753] {logging_mixin.py:115} WARNING - PGD - Batches:   9%|9         | 3/32 [00:05<00:58,  2.03s/it]
[2023-04-09 09:27:15,500] {logging_mixin.py:115} WARNING - PGD - Batches:  12%|#2        | 4/32 [00:07<00:53,  1.92s/it]
[2023-04-09 09:27:16,915] {logging_mixin.py:115} WARNING - PGD - Batches:  16%|#5        | 5/32 [00:08<00:46,  1.74s/it]
[2023-04-09 09:27:18,335] {logging_mixin.py:115} WARNING - PGD - Batches:  19%|#8        | 6/32 [00:09<00:42,  1.63s/it]
[2023-04-09 09:27:19,618] {logging_mixin.py:115} WARNING - PGD - Batches:  22%|##1       | 7/32 [00:11<00:37,  1.52s/it]
[2023-04-09 09:27:20,366] {logging_mixin.py:115} WARNING - PGD - Batches:  25%|##5       | 8/32 [00:11<00:30,  1.27s/it]
[2023-04-09 09:27:21,886] {logging_mixin.py:115} WARNING - PGD - Batches:  28%|##8       | 9/32 [00:13<00:31,  1.35s/it]
[2023-04-09 09:27:22,488] {logging_mixin.py:115} WARNING - PGD - Batches:  31%|###1      | 10/32 [00:14<00:24,  1.12s/it]
[2023-04-09 09:27:23,051] {logging_mixin.py:115} WARNING - PGD - Batches:  34%|###4      | 11/32 [00:14<00:19,  1.05it/s]
[2023-04-09 09:27:24,145] {logging_mixin.py:115} WARNING - PGD - Batches:  38%|###7      | 12/32 [00:15<00:19,  1.01it/s]
[2023-04-09 09:27:25,800] {logging_mixin.py:115} WARNING - PGD - Batches:  41%|####      | 13/32 [00:17<00:22,  1.19s/it]
[2023-04-09 09:27:26,503] {logging_mixin.py:115} WARNING - PGD - Batches:  44%|####3     | 14/32 [00:18<00:18,  1.05s/it]
[2023-04-09 09:27:27,957] {logging_mixin.py:115} WARNING - PGD - Batches:  47%|####6     | 15/32 [00:19<00:19,  1.17s/it]
[2023-04-09 09:27:29,658] {logging_mixin.py:115} WARNING - PGD - Batches:  50%|#####     | 16/32 [00:21<00:21,  1.33s/it]
[2023-04-09 09:27:30,915] {logging_mixin.py:115} WARNING - PGD - Batches:  53%|#####3    | 17/32 [00:22<00:19,  1.31s/it]
[2023-04-09 09:27:31,760] {logging_mixin.py:115} WARNING - PGD - Batches:  56%|#####6    | 18/32 [00:23<00:16,  1.17s/it]
[2023-04-09 09:27:32,338] {logging_mixin.py:115} WARNING - PGD - Batches:  59%|#####9    | 19/32 [00:23<00:12,  1.01it/s]
[2023-04-09 09:27:32,655] {logging_mixin.py:115} WARNING - PGD - Batches:  62%|######2   | 20/32 [00:24<00:09,  1.27it/s]
[2023-04-09 09:27:33,241] {logging_mixin.py:115} WARNING - PGD - Batches:  66%|######5   | 21/32 [00:24<00:08,  1.37it/s]
[2023-04-09 09:27:33,546] {logging_mixin.py:115} WARNING - PGD - Batches:  69%|######8   | 22/32 [00:25<00:06,  1.66it/s]
[2023-04-09 09:27:33,793] {logging_mixin.py:115} WARNING - PGD - Batches:  72%|#######1  | 23/32 [00:25<00:04,  2.02it/s]
[2023-04-09 09:27:34,105] {logging_mixin.py:115} WARNING - PGD - Batches:  75%|#######5  | 24/32 [00:25<00:03,  2.27it/s]
[2023-04-09 09:27:34,408] {logging_mixin.py:115} WARNING - PGD - Batches:  78%|#######8  | 25/32 [00:25<00:02,  2.51it/s]
[2023-04-09 09:27:34,757] {logging_mixin.py:115} WARNING - PGD - Batches:  81%|########1 | 26/32 [00:26<00:02,  2.60it/s]
[2023-04-09 09:27:34,957] {logging_mixin.py:115} WARNING - PGD - Batches:  84%|########4 | 27/32 [00:26<00:01,  3.04it/s]
[2023-04-09 09:27:35,151] {logging_mixin.py:115} WARNING - PGD - Batches:  88%|########7 | 28/32 [00:26<00:01,  3.47it/s]
[2023-04-09 09:27:35,356] {logging_mixin.py:115} WARNING - PGD - Batches:  91%|######### | 29/32 [00:26<00:00,  3.80it/s]
[2023-04-09 09:27:35,672] {logging_mixin.py:115} WARNING - PGD - Batches:  94%|#########3| 30/32 [00:27<00:00,  3.58it/s]
[2023-04-09 09:27:35,958] {logging_mixin.py:115} WARNING - PGD - Batches:  97%|#########6| 31/32 [00:27<00:00,  3.56it/s]
[2023-04-09 09:27:36,166] {logging_mixin.py:115} WARNING - PGD - Batches: 100%|##########| 32/32 [00:27<00:00,  3.86it/s]
[2023-04-09 09:27:36,167] {logging_mixin.py:115} WARNING -                                                               
[2023-04-09 09:27:36,201] {projected_gradient_descent_pytorch.py:239} INFO - Success rate of attack: 15.10%
[2023-04-09 09:27:36,220] {transport.py:157} INFO - Attempting refresh to obtain initial access_token
[2023-04-09 09:27:36,225] {client.py:777} INFO - Refreshing access_token
[2023-04-09 09:27:37,832] {xcom.py:585} ERROR - Could not serialize the XCom value into JSON. If you are using pickle instead of JSON for XCom, then you need to enable pickle support for XCom in your *** config.
[2023-04-09 09:27:37,833] {taskinstance.py:1889} ERROR - Task failed with exception
Traceback (most recent call last):
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/operators/python.py", line 171, in execute
    return_value = self.execute_callable()
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/operators/python.py", line 189, in execute_callable
    return self.python_callable(*self.op_args, **self.op_kwargs)
  File "/opt/airflow/dags/attack_dag.py", line 123, in attack_BasicIterativeMethod
    ti.xcom_push(key='attack_BasicIterativeMethod_score', value=model_acc)
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/utils/session.py", line 71, in wrapper
    return func(*args, session=session, **kwargs)
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/models/taskinstance.py", line 2380, in xcom_push
    session=session,
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/utils/session.py", line 68, in wrapper
    return func(*args, **kwargs)
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/models/xcom.py", line 197, in set
    map_index=map_index,
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/models/xcom.py", line 582, in serialize_value
    return json.dumps(value).encode('UTF-8')
  File "/usr/local/lib/python3.7/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
  File "/usr/local/lib/python3.7/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.7/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/usr/local/lib/python3.7/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ndarray is not JSON serializable
[2023-04-09 09:27:37,847] {taskinstance.py:1400} INFO - Marking task as UP_FOR_RETRY. dag_id=multi_attack_dag, task_id=attack_BasicIterativeMethod, execution_date=20230409T092530, start_date=20230409T092551, end_date=20230409T092737
[2023-04-09 09:27:37,864] {standard_task_runner.py:97} ERROR - Failed to execute job 4902 for task attack_BasicIterativeMethod (Object of type ndarray is not JSON serializable; 7027)
[2023-04-09 09:27:37,927] {local_task_job.py:156} INFO - Task exited with return code 1
[2023-04-09 09:27:37,954] {local_task_job.py:273} INFO - 0 downstream tasks scheduled from follow-on schedule check
