[2023-04-27 09:31:57,672] {taskinstance.py:1159} INFO - Dependencies all met for <TaskInstance: multi_attack_dag.attack_NewtonFool manual__2023-04-27T09:23:14.509759+00:00 [queued]>
[2023-04-27 09:31:57,971] {taskinstance.py:1159} INFO - Dependencies all met for <TaskInstance: multi_attack_dag.attack_NewtonFool manual__2023-04-27T09:23:14.509759+00:00 [queued]>
[2023-04-27 09:31:57,976] {taskinstance.py:1356} INFO - 
--------------------------------------------------------------------------------
[2023-04-27 09:31:57,980] {taskinstance.py:1357} INFO - Starting attempt 1 of 2
[2023-04-27 09:31:57,981] {taskinstance.py:1358} INFO - 
--------------------------------------------------------------------------------
[2023-04-27 09:31:58,042] {taskinstance.py:1377} INFO - Executing <Task(PythonOperator): attack_NewtonFool> on 2023-04-27 09:23:14.509759+00:00
[2023-04-27 09:31:58,076] {standard_task_runner.py:52} INFO - Started process 3779 to run task
[2023-04-27 09:31:58,090] {standard_task_runner.py:79} INFO - Running: ['***', 'tasks', 'run', 'multi_attack_dag', 'attack_NewtonFool', 'manual__2023-04-27T09:23:14.509759+00:00', '--job-id', '6540', '--raw', '--subdir', 'DAGS_FOLDER/attack_dag.py', '--cfg-path', '/tmp/tmp02bl6qbd', '--error-file', '/tmp/tmpi2o22eci']
[2023-04-27 09:31:58,094] {standard_task_runner.py:80} INFO - Job 6540: Subtask attack_NewtonFool
[2023-04-27 09:31:58,752] {task_command.py:369} INFO - Running <TaskInstance: multi_attack_dag.attack_NewtonFool manual__2023-04-27T09:23:14.509759+00:00 [running]> on host e7e31d5a6603
[2023-04-27 09:31:59,166] {taskinstance.py:1571} INFO - Exporting the following env vars:
AIRFLOW_CTX_DAG_OWNER=***
AIRFLOW_CTX_DAG_ID=multi_attack_dag
AIRFLOW_CTX_TASK_ID=attack_NewtonFool
AIRFLOW_CTX_EXECUTION_DATE=2023-04-27T09:23:14.509759+00:00
AIRFLOW_CTX_TRY_NUMBER=1
AIRFLOW_CTX_DAG_RUN_ID=manual__2023-04-27T09:23:14.509759+00:00
[2023-04-27 09:31:59,171] {transport.py:157} INFO - Attempting refresh to obtain initial access_token
[2023-04-27 09:31:59,180] {client.py:777} INFO - Refreshing access_token
[2023-04-27 09:31:59,910] {transport.py:157} INFO - Attempting refresh to obtain initial access_token
[2023-04-27 09:31:59,915] {client.py:777} INFO - Refreshing access_token
[2023-04-27 09:32:22,122] {pytorch.py:1198} INFO - Inferred 5 hidden layers on PyTorch classifier.
[2023-04-27 09:37:15,602] {attack_dag.py:642} INFO - Optimizing...
[2023-04-27 09:37:15,648] {logging_mixin.py:115} INFO - I am right here on <class 'art.attacks.evasion.newtonfool.NewtonFool'>
[2023-04-27 09:37:15,650] {logging_mixin.py:115} INFO - <function optimize_evasion_attack.<locals>.<lambda> at 0x7fdd0ec68560>
[2023-04-27 09:37:15,775] {logging_mixin.py:115} INFO - This is the attack : <class 'art.attacks.evasion.newtonfool.NewtonFool'> and its HP : {'eta': 0.07759063787941398}
[2023-04-27 09:37:16,270] {logging_mixin.py:115} WARNING - NewtonFool:   0%|          | 0/197 [00:00<?, ?it/s]
[2023-04-27 09:37:27,528] {logging_mixin.py:115} WARNING - NewtonFool:   1%|          | 1/197 [00:11<36:41, 11.23s/it]
[2023-04-27 09:37:39,122] {logging_mixin.py:115} WARNING - NewtonFool:   1%|1         | 2/197 [00:22<37:14, 11.46s/it]
[2023-04-27 09:37:51,689] {logging_mixin.py:115} WARNING - NewtonFool:   2%|1         | 3/197 [00:35<38:41, 11.97s/it]
[2023-04-27 09:38:04,217] {logging_mixin.py:115} WARNING - NewtonFool:   2%|2         | 4/197 [00:47<39:12, 12.19s/it]
[2023-04-27 09:38:13,852] {logging_mixin.py:115} WARNING - NewtonFool:   3%|2         | 5/197 [00:57<36:03, 11.27s/it]
[2023-04-27 09:38:26,038] {logging_mixin.py:115} WARNING - NewtonFool:   3%|3         | 6/197 [01:09<36:51, 11.58s/it]
[2023-04-27 09:38:36,871] {logging_mixin.py:115} WARNING - NewtonFool:   4%|3         | 7/197 [01:20<35:53, 11.34s/it]
[2023-04-27 09:38:49,740] {logging_mixin.py:115} WARNING - NewtonFool:   4%|4         | 8/197 [01:33<37:14, 11.82s/it]
[2023-04-27 09:39:05,016] {logging_mixin.py:115} WARNING - NewtonFool:   5%|4         | 9/197 [01:48<40:25, 12.90s/it]
[2023-04-27 09:39:18,049] {logging_mixin.py:115} WARNING - NewtonFool:   5%|5         | 10/197 [02:01<40:20, 12.94s/it]
[2023-04-27 09:39:30,341] {logging_mixin.py:115} WARNING - NewtonFool:   6%|5         | 11/197 [02:14<39:30, 12.74s/it]
[2023-04-27 10:02:07,822] {logging_mixin.py:115} WARNING - NewtonFool:   6%|6         | 12/197 [24:51<21:40:38, 421.83s/it]
[2023-04-27 10:02:17,038] {logging_mixin.py:115} WARNING - NewtonFool:   7%|6         | 13/197 [25:00<15:10:17, 296.83s/it]
[2023-04-27 10:02:18,992] {local_task_job.py:221} WARNING - State of this instance has been externally set to up_for_retry. Terminating instance.
[2023-04-27 10:02:19,059] {process_utils.py:129} INFO - Sending Signals.SIGTERM to group 3779. PIDs of all processes in the group: [3779]
[2023-04-27 10:02:19,216] {process_utils.py:80} INFO - Sending the signal Signals.SIGTERM to group 3779
[2023-04-27 10:02:19,287] {taskinstance.py:1541} ERROR - Received SIGTERM. Terminating subprocesses.
[2023-04-27 10:02:19,369] {logging_mixin.py:115} WARNING - NewtonFool:   7%|6         | 13/197 [25:03<5:54:34, 115.62s/it] 
[2023-04-27 10:02:20,304] {taskinstance.py:1889} ERROR - Task failed with exception
Traceback (most recent call last):
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/operators/python.py", line 171, in execute
    return_value = self.execute_callable()
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/operators/python.py", line 189, in execute_callable
    return self.python_callable(*self.op_args, **self.op_kwargs)
  File "/opt/airflow/dags/attack_dag.py", line 484, in attack_NewtonFool
    model_acc, adversarial_examples  = attack(NewtonFool)
  File "/opt/airflow/dags/attack_dag.py", line 643, in attack
    optimized_attack = optimize_evasion_attack(attack_obj,estimator,x_test,y_test)
  File "/opt/airflow/dags/attack_dag.py", line 619, in optimize_evasion_attack
    result = gp_minimize(func, search_space, n_calls=10)
  File "/home/airflow/.local/lib/python3.7/site-packages/skopt/optimizer/gp.py", line 268, in gp_minimize
    callback=callback, n_jobs=n_jobs, model_queue_size=model_queue_size)
  File "/home/airflow/.local/lib/python3.7/site-packages/skopt/optimizer/base.py", line 299, in base_minimize
    next_y = func(next_x)
  File "/opt/airflow/dags/attack_dag.py", line 617, in <lambda>
    func = lambda params: _optimize(attack, params,classifier=classifier,data=data,true_labels=true_labels)
  File "/opt/airflow/dags/attack_dag.py", line 609, in _optimize
    adv_examples = attack_to_optimize.generate(data)
  File "/home/airflow/.local/lib/python3.7/site-packages/art/attacks/evasion/newtonfool.py", line 114, in generate
    grads = self.estimator.class_gradient(batch, label=l_batch)
  File "/home/airflow/.local/lib/python3.7/site-packages/art/estimators/classification/pytorch.py", line 686, in class_gradient
    retain_graph=True,
  File "/home/airflow/.local/lib/python3.7/site-packages/torch/autograd/__init__.py", line 199, in backward
    allow_unreachable=True, accumulate_grad=True)  # Calls into the C++ engine to run the backward pass
  File "/home/airflow/.local/lib/python3.7/site-packages/art/estimators/classification/pytorch.py", line 649, in hook
    def hook(grad):
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/models/taskinstance.py", line 1543, in signal_handler
    raise AirflowException("Task received SIGTERM signal")
airflow.exceptions.AirflowException: Task received SIGTERM signal
[2023-04-27 10:02:20,489] {taskinstance.py:1400} INFO - Marking task as FAILED. dag_id=multi_attack_dag, task_id=attack_NewtonFool, execution_date=20230427T092314, start_date=20230427T093157, end_date=20230427T100220
[2023-04-27 10:02:20,787] {standard_task_runner.py:97} ERROR - Failed to execute job 6540 for task attack_NewtonFool (Task received SIGTERM signal; 3779)
[2023-04-27 10:02:20,921] {process_utils.py:75} INFO - Process psutil.Process(pid=3779, status='terminated', exitcode=1, started='09:31:57') (3779) terminated with exit code 1
