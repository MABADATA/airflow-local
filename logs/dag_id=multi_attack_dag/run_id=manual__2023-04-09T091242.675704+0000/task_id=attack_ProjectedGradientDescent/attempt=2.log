[2023-04-09 09:20:11,249] {taskinstance.py:1159} INFO - Dependencies all met for <TaskInstance: multi_attack_dag.attack_ProjectedGradientDescent manual__2023-04-09T09:12:42.675704+00:00 [queued]>
[2023-04-09 09:20:11,262] {taskinstance.py:1159} INFO - Dependencies all met for <TaskInstance: multi_attack_dag.attack_ProjectedGradientDescent manual__2023-04-09T09:12:42.675704+00:00 [queued]>
[2023-04-09 09:20:11,262] {taskinstance.py:1356} INFO - 
--------------------------------------------------------------------------------
[2023-04-09 09:20:11,263] {taskinstance.py:1357} INFO - Starting attempt 2 of 2
[2023-04-09 09:20:11,263] {taskinstance.py:1358} INFO - 
--------------------------------------------------------------------------------
[2023-04-09 09:20:11,277] {taskinstance.py:1377} INFO - Executing <Task(PythonOperator): attack_ProjectedGradientDescent> on 2023-04-09 09:12:42.675704+00:00
[2023-04-09 09:20:11,286] {standard_task_runner.py:52} INFO - Started process 6757 to run task
[2023-04-09 09:20:11,291] {standard_task_runner.py:79} INFO - Running: ['***', 'tasks', 'run', 'multi_attack_dag', 'attack_ProjectedGradientDescent', 'manual__2023-04-09T09:12:42.675704+00:00', '--job-id', '4896', '--raw', '--subdir', 'DAGS_FOLDER/attack_dag.py', '--cfg-path', '/tmp/tmp2hxv3b4a', '--error-file', '/tmp/tmpm52cohvd']
[2023-04-09 09:20:11,292] {standard_task_runner.py:80} INFO - Job 4896: Subtask attack_ProjectedGradientDescent
[2023-04-09 09:20:11,355] {task_command.py:369} INFO - Running <TaskInstance: multi_attack_dag.attack_ProjectedGradientDescent manual__2023-04-09T09:12:42.675704+00:00 [running]> on host ff3d40af78f9
[2023-04-09 09:20:11,429] {taskinstance.py:1571} INFO - Exporting the following env vars:
AIRFLOW_CTX_DAG_OWNER=***
AIRFLOW_CTX_DAG_ID=multi_attack_dag
AIRFLOW_CTX_TASK_ID=attack_ProjectedGradientDescent
AIRFLOW_CTX_EXECUTION_DATE=2023-04-09T09:12:42.675704+00:00
AIRFLOW_CTX_TRY_NUMBER=2
AIRFLOW_CTX_DAG_RUN_ID=manual__2023-04-09T09:12:42.675704+00:00
[2023-04-09 09:20:11,432] {transport.py:157} INFO - Attempting refresh to obtain initial access_token
[2023-04-09 09:20:11,436] {client.py:777} INFO - Refreshing access_token
[2023-04-09 09:20:12,065] {transport.py:157} INFO - Attempting refresh to obtain initial access_token
[2023-04-09 09:20:12,067] {client.py:777} INFO - Refreshing access_token
[2023-04-09 09:20:13,019] {transport.py:157} INFO - Attempting refresh to obtain initial access_token
[2023-04-09 09:20:13,020] {client.py:777} INFO - Refreshing access_token
[2023-04-09 09:20:13,697] {pytorch.py:1198} INFO - Inferred 5 hidden layers on PyTorch classifier.
[2023-04-09 09:20:13,699] {transport.py:157} INFO - Attempting refresh to obtain initial access_token
[2023-04-09 09:20:13,700] {client.py:777} INFO - Refreshing access_token
[2023-04-09 09:21:26,576] {projected_gradient_descent.py:199} INFO - Creating adversarial samples.
[2023-04-09 09:21:26,937] {logging_mixin.py:115} WARNING - PGD - Batches:   0%|          | 0/32 [00:00<?, ?it/s]
[2023-04-09 09:21:27,632] {logging_mixin.py:115} WARNING - PGD - Batches:   3%|3         | 1/32 [00:00<00:21,  1.44it/s]
[2023-04-09 09:21:31,039] {logging_mixin.py:115} WARNING - PGD - Batches:   6%|6         | 2/32 [00:04<01:08,  2.29s/it]
[2023-04-09 09:21:32,346] {logging_mixin.py:115} WARNING - PGD - Batches:   9%|9         | 3/32 [00:05<00:53,  1.84s/it]
[2023-04-09 09:21:32,972] {logging_mixin.py:115} WARNING - PGD - Batches:  12%|#2        | 4/32 [00:06<00:38,  1.36s/it]
[2023-04-09 09:21:34,537] {logging_mixin.py:115} WARNING - PGD - Batches:  16%|#5        | 5/32 [00:07<00:38,  1.43s/it]
[2023-04-09 09:21:34,974] {logging_mixin.py:115} WARNING - PGD - Batches:  19%|#8        | 6/32 [00:08<00:28,  1.10s/it]
[2023-04-09 09:21:36,105] {logging_mixin.py:115} WARNING - PGD - Batches:  22%|##1       | 7/32 [00:09<00:27,  1.11s/it]
[2023-04-09 09:21:36,873] {logging_mixin.py:115} WARNING - PGD - Batches:  25%|##5       | 8/32 [00:09<00:23,  1.00it/s]
[2023-04-09 09:21:38,618] {logging_mixin.py:115} WARNING - PGD - Batches:  28%|##8       | 9/32 [00:11<00:28,  1.23s/it]
[2023-04-09 09:21:39,119] {logging_mixin.py:115} WARNING - PGD - Batches:  31%|###1      | 10/32 [00:12<00:22,  1.01s/it]
[2023-04-09 09:21:41,064] {logging_mixin.py:115} WARNING - PGD - Batches:  34%|###4      | 11/32 [00:14<00:27,  1.29s/it]
[2023-04-09 09:21:41,791] {logging_mixin.py:115} WARNING - PGD - Batches:  38%|###7      | 12/32 [00:14<00:22,  1.12s/it]
[2023-04-09 09:21:42,771] {logging_mixin.py:115} WARNING - PGD - Batches:  41%|####      | 13/32 [00:15<00:20,  1.08s/it]
[2023-04-09 09:21:42,944] {logging_mixin.py:115} WARNING - PGD - Batches:  44%|####3     | 14/32 [00:16<00:14,  1.24it/s]
[2023-04-09 09:21:43,478] {logging_mixin.py:115} WARNING - PGD - Batches:  47%|####6     | 15/32 [00:16<00:12,  1.38it/s]
[2023-04-09 09:21:44,212] {logging_mixin.py:115} WARNING - PGD - Batches:  50%|#####     | 16/32 [00:17<00:11,  1.38it/s]
[2023-04-09 09:21:44,443] {logging_mixin.py:115} WARNING - PGD - Batches:  53%|#####3    | 17/32 [00:17<00:08,  1.73it/s]
[2023-04-09 09:21:44,746] {logging_mixin.py:115} WARNING - PGD - Batches:  56%|#####6    | 18/32 [00:17<00:06,  2.02it/s]
[2023-04-09 09:21:45,042] {logging_mixin.py:115} WARNING - PGD - Batches:  59%|#####9    | 19/32 [00:18<00:05,  2.30it/s]
[2023-04-09 09:21:45,308] {logging_mixin.py:115} WARNING - PGD - Batches:  62%|######2   | 20/32 [00:18<00:04,  2.60it/s]
[2023-04-09 09:21:45,627] {logging_mixin.py:115} WARNING - PGD - Batches:  66%|######5   | 21/32 [00:18<00:04,  2.74it/s]
[2023-04-09 09:21:46,126] {logging_mixin.py:115} WARNING - PGD - Batches:  69%|######8   | 22/32 [00:19<00:04,  2.47it/s]
[2023-04-09 09:21:46,587] {logging_mixin.py:115} WARNING - PGD - Batches:  72%|#######1  | 23/32 [00:19<00:03,  2.37it/s]
[2023-04-09 09:21:47,341] {logging_mixin.py:115} WARNING - PGD - Batches:  75%|#######5  | 24/32 [00:20<00:04,  1.92it/s]
[2023-04-09 09:21:47,760] {logging_mixin.py:115} WARNING - PGD - Batches:  78%|#######8  | 25/32 [00:20<00:03,  2.04it/s]
[2023-04-09 09:21:48,189] {logging_mixin.py:115} WARNING - PGD - Batches:  81%|########1 | 26/32 [00:21<00:02,  2.12it/s]
[2023-04-09 09:21:48,898] {logging_mixin.py:115} WARNING - PGD - Batches:  84%|########4 | 27/32 [00:21<00:02,  1.84it/s]
[2023-04-09 09:21:49,893] {logging_mixin.py:115} WARNING - PGD - Batches:  88%|########7 | 28/32 [00:22<00:02,  1.47it/s]
[2023-04-09 09:21:50,571] {logging_mixin.py:115} WARNING - PGD - Batches:  91%|######### | 29/32 [00:23<00:02,  1.47it/s]
[2023-04-09 09:21:51,010] {logging_mixin.py:115} WARNING - PGD - Batches:  94%|#########3| 30/32 [00:24<00:01,  1.65it/s]
[2023-04-09 09:21:51,324] {logging_mixin.py:115} WARNING - PGD - Batches:  97%|#########6| 31/32 [00:24<00:00,  1.93it/s]
[2023-04-09 09:21:51,609] {logging_mixin.py:115} WARNING - PGD - Batches: 100%|##########| 32/32 [00:24<00:00,  2.23it/s]
[2023-04-09 09:21:51,610] {logging_mixin.py:115} WARNING -                                                               
[2023-04-09 09:21:51,662] {projected_gradient_descent_pytorch.py:239} INFO - Success rate of attack: 15.10%
[2023-04-09 09:21:51,703] {transport.py:157} INFO - Attempting refresh to obtain initial access_token
[2023-04-09 09:21:51,709] {client.py:777} INFO - Refreshing access_token
[2023-04-09 09:21:52,712] {xcom.py:585} ERROR - Could not serialize the XCom value into JSON. If you are using pickle instead of JSON for XCom, then you need to enable pickle support for XCom in your *** config.
[2023-04-09 09:21:52,715] {taskinstance.py:1889} ERROR - Task failed with exception
Traceback (most recent call last):
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/operators/python.py", line 171, in execute
    return_value = self.execute_callable()
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/operators/python.py", line 189, in execute_callable
    return self.python_callable(*self.op_args, **self.op_kwargs)
  File "/opt/airflow/dags/attack_dag.py", line 131, in attack_ProjectedGradientDescent
    ti.xcom_push(key='attack_ProjectedGradientDescent_adv', value=adversarial_examples.tostring())
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/utils/session.py", line 71, in wrapper
    return func(*args, session=session, **kwargs)
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/models/taskinstance.py", line 2380, in xcom_push
    session=session,
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/utils/session.py", line 68, in wrapper
    return func(*args, **kwargs)
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/models/xcom.py", line 197, in set
    map_index=map_index,
  File "/home/airflow/.local/lib/python3.7/site-packages/airflow/models/xcom.py", line 582, in serialize_value
    return json.dumps(value).encode('UTF-8')
  File "/usr/local/lib/python3.7/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
  File "/usr/local/lib/python3.7/json/encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "/usr/local/lib/python3.7/json/encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "/usr/local/lib/python3.7/json/encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type bytes is not JSON serializable
[2023-04-09 09:21:52,752] {taskinstance.py:1400} INFO - Marking task as FAILED. dag_id=multi_attack_dag, task_id=attack_ProjectedGradientDescent, execution_date=20230409T091242, start_date=20230409T092011, end_date=20230409T092152
[2023-04-09 09:21:52,789] {standard_task_runner.py:97} ERROR - Failed to execute job 4896 for task attack_ProjectedGradientDescent (Object of type bytes is not JSON serializable; 6757)
[2023-04-09 09:21:52,889] {local_task_job.py:156} INFO - Task exited with return code 1
[2023-04-09 09:21:52,960] {local_task_job.py:273} INFO - 0 downstream tasks scheduled from follow-on schedule check
